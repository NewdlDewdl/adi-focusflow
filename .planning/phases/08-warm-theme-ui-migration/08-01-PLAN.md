---
phase: 08-warm-theme-ui-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/page.tsx
  - src/components/landing/Hero.tsx
  - src/app/globals.css
  - src/styles/warm-theme.module.css
  - tailwind.config.ts
autonomous: false

must_haves:
  truths:
    - "Main page (localhost:3000) displays warm beige/cream color palette matching /warm exactly"
    - "Background shows animated gradient blobs in warm tones (#E8DCC4, #D8E2DC, #F2E8DE)"
    - "Glass morphism effects applied to UI cards with backdrop-blur"
    - "Typography uses serif font for headings, consistent with warm theme"
    - "Button styling matches warm theme gradient (coral/terracotta tones)"
    - "Video detection system remains completely untouched and functional"
  artifacts:
    - path: "src/styles/warm-theme.module.css"
      provides: "CSS module with warm color palette, animations, and glass effects"
      contains: "bgTexture, glassOrganic, animateFloat, animateGradientSweep"
    - path: "src/components/landing/Hero.tsx"
      provides: "Updated Hero component with warm theme styling"
      contains: "warm color classes, gradient background, animated blobs"
    - path: "tailwind.config.ts"
      provides: "Extended Tailwind config with warm color palette"
      contains: "warmBeige, warmBrown, warmCoral color definitions"
  key_links:
    - from: "src/app/page.tsx"
      to: "src/components/landing/Hero.tsx"
      via: "imports and renders Hero with warm theme wrapper"
      pattern: "Hero.*warm"
    - from: "src/components/landing/Hero.tsx"
      to: "src/styles/warm-theme.module.css"
      via: "imports CSS module for warm styling classes"
      pattern: "import.*warm-theme"
---

<objective>
Migrate the warm theme's visual design (color palette, gradients, glass morphism, typography) from localhost:3000/warm to the main page at localhost:3000, while leaving all video detection code completely untouched.

Purpose: Transform the main landing page from dark theme (bg-gray-950) to warm beige theme with animated backgrounds, glass effects, and warm color palette, matching the /warm page design exactly.

Output: Updated Hero component with warm styling, CSS module for warm theme, extended Tailwind config, and Playwright tests confirming video detection still works.
</objective>

<execution_context>
@/Users/adiga/.claude/get-shit-done/workflows/execute-plan.md
@/Users/adiga/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/page.tsx
@src/components/landing/Hero.tsx
@src/app/globals.css
@tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create warm theme CSS module and extend Tailwind config</name>
  <files>src/styles/warm-theme.module.css, tailwind.config.ts</files>
  <action>
**Create warm-theme.module.css:**

Create a new CSS module at `src/styles/warm-theme.module.css` with:

1. **Color Palette** (CSS custom properties):
   - `--warm-bg: #FDFBF7` (main background - warm beige/cream)
   - `--warm-text: #43302B` (dark brown text)
   - `--warm-text-muted: #8D7F7D` (muted brown)
   - `--warm-accent: #C06C4C` (coral/terracotta accent)
   - `--warm-accent-light: #E07856` (lighter coral)
   - `--warm-surface: #F5F2EB` (card/surface color)
   - `--warm-border: #EBE5DA` (border color)
   - `--warm-green: #6F7D65` (muted green for toggles)

2. **Animations**:
   ```css
   @keyframes float {
     0%, 100% { transform: translateY(0px); }
     50% { transform: translateY(-20px); }
   }

   @keyframes floatDelayed {
     0%, 100% { transform: translateY(0px); }
     50% { transform: translateY(-15px); }
   }

   @keyframes gradientSweep {
     0% { background-position: 0% 50%; }
     50% { background-position: 100% 50%; }
     100% { background-position: 0% 50%; }
   }

   .animateFloat {
     animation: float 8s ease-in-out infinite;
   }

   .animateFloatDelayed {
     animation: floatDelayed 10s ease-in-out infinite;
   }

   .animateGradientSweep {
     background: linear-gradient(135deg, #E07856, #C06C4C, #D8A48F);
     background-size: 200% 200%;
     animation: gradientSweep 8s ease infinite;
   }
   ```

3. **Glass Morphism Effect**:
   ```css
   .glassOrganic {
     background: rgba(253, 251, 247, 0.7);
     backdrop-filter: blur(10px);
     -webkit-backdrop-filter: blur(10px);
   }
   ```

4. **Background Texture** (subtle noise):
   ```css
   .bgTexture {
     background-image:
       repeating-linear-gradient(
         90deg,
         rgba(0,0,0,0.03) 0px,
         transparent 1px,
         transparent 2px,
         rgba(0,0,0,0.03) 3px
       );
   }
   ```

5. **Transitions**:
   ```css
   .stateTransition {
     transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
   }

   .heroTitle {
     font-family: Georgia, 'Times New Roman', serif;
     text-shadow: 0 2px 4px rgba(67, 48, 43, 0.1);
   }
   ```

**Update tailwind.config.ts:**

Extend the Tailwind theme with warm colors:

```typescript
theme: {
  extend: {
    colors: {
      warmBeige: '#FDFBF7',
      warmBrown: '#43302B',
      warmBrownMuted: '#8D7F7D',
      warmCoral: '#C06C4C',
      warmCoralLight: '#E07856',
      warmSurface: '#F5F2EB',
      warmBorder: '#EBE5DA',
      warmGreen: '#6F7D65',
    },
    fontFamily: {
      serif: ['Georgia', 'Times New Roman', 'serif'],
    },
  },
}
```
  </action>
  <verify>
```bash
cat src/styles/warm-theme.module.css | grep -E "(animateFloat|glassOrganic|--warm-bg)"
cat tailwind.config.ts | grep -E "warmBeige|warmCoral"
```
Verify CSS module contains animations and color variables, Tailwind config extended with warm colors.
  </verify>
  <done>Created warm-theme.module.css with color palette, animations (float, gradientSweep), glass morphism, and texture effects. Extended Tailwind config with 8 warm color tokens.</done>
</task>

<task type="auto">
  <name>Task 2: Update Hero component with warm theme styling</name>
  <files>src/components/landing/Hero.tsx</files>
  <action>
**Transform Hero.tsx to use warm theme:**

1. **Import warm theme CSS module:**
   ```typescript
   import styles from '@/styles/warm-theme.module.css';
   ```

2. **Update component structure** (keep all existing logic, ONLY change styling):

   - **Remove**: All `bg-gray-*`, `text-gray-*`, `border-gray-*` classes
   - **Replace main section background**:
     ```tsx
     className="flex min-h-screen flex-col items-center justify-center px-4 bg-warmBeige text-warmBrown relative overflow-hidden"
     ```

3. **Add animated gradient blobs** (BEFORE the content div):
   ```tsx
   {/* Background texture overlay */}
   <div className={`absolute inset-0 ${styles.bgTexture} z-0 pointer-events-none mix-blend-multiply`} />

   {/* Animated gradient blobs */}
   <div className={`absolute top-[-10%] left-[-5%] w-[600px] h-[600px] bg-[#E8DCC4] rounded-full blur-[100px] opacity-60 pointer-events-none ${styles.animateFloat}`} />
   <div className={`absolute bottom-[-10%] right-[-5%] w-[700px] h-[700px] bg-[#D8E2DC] rounded-full blur-[120px] opacity-60 pointer-events-none ${styles.animateFloatDelayed}`} />
   <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-[#F2E8DE] rounded-full blur-[80px] opacity-40 pointer-events-none" />
   ```

4. **Update content wrapper**:
   ```tsx
   <div className="mx-auto max-w-4xl text-center relative z-10">
   ```

5. **Update badge styling**:
   ```tsx
   className={`mb-8 inline-flex items-center gap-2 rounded-full border border-warmBorder ${styles.glassOrganic} px-4 py-1.5 text-sm text-warmBrownMuted`}
   ```
   - Change Eye icon color: `text-warmCoral`

6. **Update heading** (keep CyclingWord component):
   ```tsx
   <h1 className={`mb-6 text-4xl font-bold tracking-tight sm:text-5xl md:text-6xl font-serif ${styles.heroTitle}`}>
   ```
   - Update CyclingWord span: `text-warmCoral` instead of `text-blue-400`

7. **Update subheading**:
   ```tsx
   className="mx-auto mb-4 max-w-2xl text-lg text-warmBrownMuted sm:text-xl"
   ```

8. **Update privacy badges**:
   ```tsx
   className="mb-10 flex flex-wrap items-center justify-center gap-4 text-sm text-warmBrownMuted"
   ```
   - Shield icons: `text-warmGreen`

9. **Update CTA button** - Keep Link and Button, style the Button wrapper:
   ```tsx
   <div className="relative">
     <div className={`absolute -inset-1 rounded-full ${styles.animateGradientSweep} opacity-40 blur-md`} />
     <Link href="/session">
       <Button size="lg" className="relative gap-2 bg-warmCoral hover:bg-warmCoralLight text-warmBeige">
         Start Focus Session
         <ArrowRight className="h-5 w-5" />
       </Button>
     </Link>
   </div>
   ```

**CRITICAL**: Do NOT modify any video detection components, hooks, or logic. Only update Hero.tsx styling.
  </action>
  <verify>
```bash
grep -n "warmBeige\|warmCoral\|styles\." src/components/landing/Hero.tsx | head -10
grep -n "bg-gray" src/components/landing/Hero.tsx && echo "ERROR: Dark theme classes still present" || echo "✓ Dark theme removed"
```
Verify warm colors applied, no dark theme classes remain, gradient animation present.
  </verify>
  <done>Hero component updated with warm beige background, animated gradient blobs, glass morphism badge, coral accents, serif heading font, and gradient-animated CTA button. All dark theme classes removed.</done>
</task>

<task type="auto">
  <name>Task 3: Update main page wrapper and global styles</name>
  <files>src/app/page.tsx, src/app/globals.css</files>
  <action>
**Update page.tsx:**

Replace dark theme wrapper with warm theme:
```tsx
import Hero from '@/components/landing/Hero';

export default function LandingPage() {
  return (
    <main className="min-h-screen bg-warmBeige text-warmBrown font-sans selection:bg-warmCoral/20 selection:text-warmBrown">
      <Hero />
    </main>
  );
}
```

**Update globals.css:**

Add warm theme global styles AFTER existing Tailwind directives:

```css
/* Warm theme global overrides */
:root {
  --warm-bg: #FDFBF7;
  --warm-text: #43302B;
  --warm-accent: #C06C4C;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Ensure text selection uses warm colors globally */
::selection {
  background-color: rgba(192, 108, 76, 0.2);
  color: #43302B;
}

::-moz-selection {
  background-color: rgba(192, 108, 76, 0.2);
  color: #43302B;
}
```

**IMPORTANT**: Do NOT modify any styles related to:
- `.webcam-view` or video elements
- Detection components
- Canvas overlays
- Face mesh styling
- Any component under `src/components/detection/` or `src/components/session/`
  </action>
  <verify>
```bash
grep "bg-warmBeige" src/app/page.tsx
grep "warm-bg" src/app/globals.css
grep -r "bg-gray-950" src/app/page.tsx && echo "ERROR: Dark theme present" || echo "✓ Warm theme applied"
```
Verify page uses warm background, globals.css has warm theme variables, no dark theme on main page.
  </verify>
  <done>Main page updated with warm beige background and selection styling. Global CSS extended with warm theme variables and text selection colors. Dark theme removed from landing page.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete warm theme visual migration to main page - color palette, gradients, glass effects, animations, and typography - while video detection remains untouched.</what-built>
  <how-to-verify>
1. Open http://localhost:3000 in Chrome
2. Verify page shows warm beige/cream background (#FDFBF7) instead of dark gray
3. Verify three animated gradient blobs floating in background (beige, mint, cream tones)
4. Verify "Built for Hacklahoma 2026" badge has glass morphism effect with blur
5. Verify "Focus Flow" heading uses serif font with warm coral color on cycling word
6. Verify "Start Focus Session" button has animated gradient glow effect
7. Verify all text is dark brown (#43302B) with good contrast on beige background
8. Click "Start Focus Session" and verify video detection loads and works identically to before
9. Verify face mesh, calibration, and all detection features function normally
10. Return to main page - verify no visual regressions in warm theme
  </how-to-verify>
  <resume-signal>Type "approved" or describe any visual issues</resume-signal>
</task>

<task type="auto">
  <name>Task 4: Create Playwright tests for video detection integrity</name>
  <files>tests/phase-08-video-detection-integrity.spec.ts</files>
  <action>
Create comprehensive Playwright test to ensure video detection is unaffected by theme changes:

```typescript
import { test, expect } from '@playwright/test';

test.describe('Phase 08: Video Detection Integrity After Warm Theme Migration', () => {
  test.beforeEach(async ({ page, context }) => {
    await context.grantPermissions(['camera']);
  });

  test('should preserve video detection functionality with warm theme', async ({ page }) => {
    // Navigate to session page from warm-themed landing
    await page.goto('http://localhost:3000');
    await page.click('text=Start Focus Session');

    // Wait for session page to load
    await page.waitForURL('**/session');

    // Verify DetectionProvider loads
    await page.waitForSelector('[data-testid="webcam-view"]', { timeout: 10000 });

    // Verify video element exists and is visible
    const video = page.locator('video');
    await expect(video).toBeVisible();

    // Verify video is playing (not paused)
    const isPaused = await video.evaluate((v: HTMLVideoElement) => v.paused);
    expect(isPaused).toBe(false);

    // Verify canvas overlay exists (face mesh)
    const canvas = page.locator('canvas');
    await expect(canvas).toBeVisible();

    // Wait for detection to initialize
    await page.waitForTimeout(3000);

    // Verify face mesh color attribute exists (confirms detection running)
    const meshColor = await page.locator('[data-testid="webcam-view"]').getAttribute('data-mesh-color');
    expect(meshColor).toBeTruthy();

    // Verify calibration or detection state
    const isCalibrated = await page.locator('[data-testid="webcam-view"]').getAttribute('data-is-calibrated');
    expect(isCalibrated).toBeDefined();
  });

  test('should have warm theme on landing page', async ({ page }) => {
    await page.goto('http://localhost:3000');

    // Verify warm background color
    const bgColor = await page.evaluate(() => {
      const main = document.querySelector('main');
      return window.getComputedStyle(main!).backgroundColor;
    });

    // Should be warm beige (approximately rgb(253, 251, 247))
    expect(bgColor).toContain('253');
    expect(bgColor).toContain('251');
    expect(bgColor).toContain('247');
  });

  test('should maintain video stream quality and FPS', async ({ page }) => {
    await page.goto('http://localhost:3000/session');
    await page.waitForSelector('video', { timeout: 10000 });

    const video = page.locator('video');

    // Verify video has active stream
    const hasStream = await video.evaluate((v: HTMLVideoElement) => {
      return v.videoWidth > 0 && v.videoHeight > 0;
    });
    expect(hasStream).toBe(true);

    // Verify aspect ratio (4:3)
    const dimensions = await video.evaluate((v: HTMLVideoElement) => ({
      width: v.videoWidth,
      height: v.videoHeight
    }));
    const aspectRatio = dimensions.width / dimensions.height;
    expect(aspectRatio).toBeGreaterThan(1.2);
    expect(aspectRatio).toBeLessThan(1.5);
  });

  test('should not have CSS blocking video display', async ({ page }) => {
    await page.goto('http://localhost:3000/session');
    await page.waitForSelector('video', { timeout: 10000 });

    const video = page.locator('video');

    // Verify video visibility
    const opacity = await video.evaluate((v) => window.getComputedStyle(v).opacity);
    expect(parseFloat(opacity)).toBeGreaterThan(0);

    const display = await video.evaluate((v) => window.getComputedStyle(v).display);
    expect(display).not.toBe('none');

    const visibility = await video.evaluate((v) => window.getComputedStyle(v).visibility);
    expect(visibility).not.toBe('hidden');
  });

  test('should display calibration correctly', async ({ page }) => {
    await page.goto('http://localhost:3000/session');
    await page.waitForSelector('[data-testid="webcam-view"]', { timeout: 10000 });

    // Wait for potential calibration period
    await page.waitForTimeout(2000);

    // Check if calibration UI appears or if already calibrated
    const calibrationText = page.locator('text=/Calibrating|Calibration/i');
    const isCalibrating = await calibrationText.count() > 0;

    if (isCalibrating) {
      // Verify calibration progress bar exists
      const progressBar = page.locator('[class*="bg-blue"]').first();
      await expect(progressBar).toBeVisible();
    }

    // Detection should be running regardless
    const video = page.locator('video');
    await expect(video).toBeVisible();
  });
});
```
  </action>
  <verify>
```bash
npx playwright test tests/phase-08-video-detection-integrity.spec.ts --list
```
Verify test file compiles and 5 tests are discovered.
  </verify>
  <done>Created comprehensive Playwright test suite with 5 tests: video detection functionality, warm theme presence, stream quality, CSS non-interference, and calibration display. Tests confirm theme migration doesn't break detection.</done>
</task>

<task type="auto">
  <name>Task 5: Run Playwright tests and verify video detection integrity</name>
  <files>N/A</files>
  <action>
Execute Playwright tests to verify video detection works after warm theme migration:

```bash
npx playwright test tests/phase-08-video-detection-integrity.spec.ts --headed --project=chromium
```

**Expected results:**
- ✓ All 5 tests pass
- Video detection loads and runs
- Webcam stream active
- Face mesh overlay renders
- Calibration works
- Warm theme applied to landing page
- No CSS conflicts

If any test fails:
1. Review the error message
2. Check if video detection components were accidentally modified
3. Verify warm theme classes don't conflict with detection styles
4. Fix issues and re-run tests

**Screenshot capture:**
```bash
npx playwright test tests/phase-08-video-detection-integrity.spec.ts --headed --project=chromium --screenshot=on
```

Screenshots saved to `test-results/` for visual verification.
  </action>
  <verify>
```bash
npx playwright test tests/phase-08-video-detection-integrity.spec.ts --reporter=list
```
Check test output - all tests should pass.
  </verify>
  <done>Playwright tests executed. All 5 tests pass confirming: (1) video detection functional, (2) warm theme applied, (3) stream quality maintained, (4) no CSS blocking, (5) calibration works. Screenshots captured for visual verification.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes (no TypeScript errors)
2. `npm run build` succeeds (Next.js build completes)
3. Landing page shows warm beige theme with animated gradients
4. Glass morphism effects visible on badge
5. Typography uses serif for heading
6. Button has gradient animation glow
7. Video detection works identically to before theme change
8. All Playwright tests pass (5/5)
9. No dark theme classes remain on landing page
10. All detection components untouched
</verification>

<success_criteria>
- Landing page transformed to warm theme matching /warm design
- Color palette: beige background, brown text, coral accents
- Animated gradient blobs floating in background
- Glass morphism applied to UI elements
- Video detection system 100% functional and unchanged
- Playwright tests confirm detection integrity (5/5 passing)
- No visual regressions in video detection UI
</success_criteria>

<output>
After completion, create `.planning/phases 2/08-warm-theme-ui-migration/08-01-SUMMARY.md`
</output>
